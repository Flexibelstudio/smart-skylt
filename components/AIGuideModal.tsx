import React from 'react';
import ReactDOM from 'react-dom';
import { PrimaryButton } from './Buttons';
import { SparklesIcon, PencilIcon, StarIcon, Cog6ToothIcon, LightBulbIcon } from './icons';

interface AIGuideModalProps {
  isOpen: boolean;
  onClose: () => void;
}

const GuideSection: React.FC<{ icon: React.ReactNode; title: string; children: React.ReactNode }> = ({ icon, title, children }) => (
    <div className="flex items-start gap-4">
        <div className="flex-shrink-0 w-10 h-10 rounded-lg bg-primary/10 text-primary flex items-center justify-center">
            {icon}
        </div>
        <div>
            <h4 className="font-bold text-lg text-slate-800 dark:text-slate-100">{title}</h4>
            <p className="text-sm text-slate-600 dark:text-slate-300 mt-1">{children}</p>
        </div>
    </div>
);


export const AIGuideModal: React.FC<AIGuideModalProps> = ({ isOpen, onClose }) => {
    if (!isOpen) return null;

    let portalRoot = document.getElementById('modal-root');
    if (!portalRoot) {
        portalRoot = document.createElement('div');
        portalRoot.id = 'modal-root';
        document.body.appendChild(portalRoot);
    }

    return ReactDOM.createPortal(
        <div className="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 p-4" onClick={onClose}>
            <div className="bg-white dark:bg-slate-800 rounded-xl p-6 sm:p-8 w-full max-w-2xl text-slate-900 dark:text-white shadow-2xl border border-slate-200 dark:border-slate-700 animate-fade-in" onClick={e => e.stopPropagation()}>
                <h2 className="text-2xl font-bold mb-2">S√• h√§r fungerar AI-assistenten</h2>
                <p className="text-slate-600 dark:text-slate-300 mb-6">
                    Smart Skylt √§r din personliga kreativa partner ‚Äì en AI som l√§r sig av dina val och hj√§lper dig skapa engagerande inneh√•ll p√• ett s√§tt som passar just ditt varum√§rke.
                </p>

                <div className="space-y-6">
                    <GuideSection icon={<StarIcon className="w-6 h-6" filled />} title="Bygg din AI-profil">
                        I fliken Varum√§rke kan du ladda upp referensbilder, skriva exempeltexter och beskriva din verksamhet. AI:n anv√§nder detta som inspiration f√∂r att f√∂rst√• din ton, f√§rgskala och visuella stil.
                    </GuideSection>
                    <GuideSection icon={<Cog6ToothIcon className="w-6 h-6" />} title="Planera och automatisera">
                        Under fliken Automation kan du l√•ta AI:n skapa nya inl√§gg automatiskt utifr√•n dina scheman. Ju mer du anv√§nder den, desto b√§ttre l√§r den k√§nna din stil och dina preferenser.
                    </GuideSection>
                    <GuideSection icon={<PencilIcon className="w-6 h-6" />} title="L√•t AI:n skapa med din r√∂st">
                        N√§r du redigerar eller godk√§nner AI-f√∂rslag l√§r sig systemet hur du vill kommunicera ‚Äì b√•de i text och bild. Dina val anv√§nds som feedback, s√• framtida f√∂rslag blir mer tr√§ffs√§kra och personliga.
                    </GuideSection>
                    <GuideSection icon={<LightBulbIcon className="w-6 h-6" />} title="Fr√•ga din AI Marknadscoach">
                        Ut√∂ver automationerna har du nu en personlig marknadscoach. Klicka p√• gl√∂dlamps-knappen (üí°) f√∂r att √∂ppna en chatt d√§r du kan bolla id√©er, f√• hj√§lp med textf√∂rslag och utveckla kampanjstrategier, allt anpassat f√∂r ditt varum√§rke.
                    </GuideSection>
                    <GuideSection icon={<SparklesIcon className="w-6 h-6" />} title="F√• f√∂rslag som utvecklas √∂ver tid">
                        AI-assistenten f√∂rb√§ttras kontinuerligt baserat p√• din feedback. Den analyserar vad du gillar och anpassar sina rekommendationer d√§refter ‚Äì steg f√∂r steg blir den mer som en del av ditt team.
                    </GuideSection>
                </div>

                <div className="flex justify-end mt-8 border-t border-slate-200 dark:border-slate-700 pt-4">
                    <PrimaryButton onClick={onClose}>St√§ng guiden</PrimaryButton>
                </div>
            </div>
        </div>,
        portalRoot
    );
};